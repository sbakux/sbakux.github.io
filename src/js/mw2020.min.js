if($(".hideOnMobile").length&&window.matchMedia("(max-width: 767px)").matches&&$(".hideOnMobile").each(function(e,o){$(this).remove()}),$(window).load(function(){$("#preloader").addClass("close"),$(".loader").addClass("close"),$("body").removeClass("preload")}),$(".chapters").length&&$(".chapters #sidebar").length){var currentChapter=1,nextChapter=1;$("html, body, *").mousewheel(function(e,o){$(".chapters section article").each(function(e,o){$(this).offset().top-$(window).scrollTop()<450&&$(this).offset().top-$(window).scrollTop()>0&&(nextChapter=e+1),nextChapter!=currentChapter&&($(".chapters #sidebar li").removeClass("active"),$(".chapters #sidebar li:nth-child("+nextChapter+")").addClass("active"),currentChapter=nextChapter)})}),$(".chapters #sidebar li").each(function(e,o){$(this).find("p").on("click",function(){var o=e+1;console.log(o);var t=$(".chapters section article:nth-of-type("+o+")").offset().top-100;console.log(t),$(".chapters #sidebar li").removeClass("active"),$(".chapters #sidebar li:nth-child("+o+")").addClass("active"),$([document.documentElement,document.body]).animate({scrollTop:t},600,"easeInOutExpo")})})}var scrollThreshold=0,fastShift=!0;$("#projects").length&&$(window).width()>=1100&&$("html, body, *").mousewheel(function(e,o){$("#projects article .info").each(function(e,o){var t=$(this).offset().left,n=$(this).width();(t<=1*n+scrollThreshold&&t>scrollThreshold||t<.5*n+scrollThreshold&&t<scrollThreshold&&t>0)&&($("#projects article .info").removeClass("active"),$(this).addClass("active"))})}),$("body").hasClass("index")&&$(window).width()>=1100&&$(window).ready(function(){var e=!1;$("html, body, *").mousewheel(function(o,t){if(t>0&&1==fastShift){if(e)return;e=!0,$([document.documentElement,document.body]).animate({scrollTop:0},400,"easeInOutExpo"),$("#projects").removeClass("scrollBegin"),setTimeout(function(){e=!1},700)}else if(t<=0){if(e)return;e=!0,1==fastShift&&($([document.documentElement,document.body]).animate({scrollTop:$("#projects").offset().top},800,"easeInOutExpo"),scrollThreshold=$("#projects article:first-child").offset().left,setTimeout(function(){$(".scroll p").html("keep scrolling")},500),setTimeout(function(){$("#projects").addClass("scrollBegin")},800),fastShift=!1),setTimeout(function(){e=!1},700)}})}),$("html, body, *").mousewheel(function(e,o){$("#projects").hasClass("scrollBegin")&&(this.scrollLeft-=1*o,$(".scroll").length&&o<0&&$(".scroll").removeClass("visible"))}),$("body").mousewheel(function(){clearTimeout($.data(this,"timer")),$("#projects").hasClass("scrollBegin")&&$("#projects article:first-child").offset().left-scrollThreshold==0&&$.data(this,"timer",setTimeout(function(){fastShift=!0},100))}),window.onresize=function(){window.innerWidth<=1100&&(scrollThreshold=$("#projects article:first-child").offset().left)};var players=Array.from(document.querySelectorAll(".player"));function mapPlayers(){players.map(e=>new Plyr(e,{controls:["play-large","play","progress","current-time","duration","mute","fullscreen"]}))}function pad(e,o){return(e=e.toString()).length<o?pad("0"+e,o):e}mapPlayers(),$(".plyr").on("play",function(){var e=$(this).index(".plyr");console.log(e);for(var o=0;o<players.length;o++)o!=e&&players[o].pause()});var currentExperiment=1,allExperiments=$(".experiment").length;function nextExperiment(){$(".experiment--navigation #prev").removeClass("inactive"),currentExperiment+=1,$(".experiment").removeClass("current");for(var e=0;e<players.length;e++)players[e].pause();setTimeout(function(){window.scrollTo(0,0),players=Array.from(document.querySelectorAll(".current .player")),mapPlayers(),$("a.cta").each(function(){$(this).append('<svg class="cta-arrow" width="32" height="32" xmlns="http://www.w3.org/2000/svg"><g stroke="#00F" fill="none" fill-rule="evenodd" stroke-linejoin="round"><circle cx="16" cy="16" r="15.12"/><path d="M16.14 9.93L22.21 16l-6.07 6.07M8.23 16h13.98" stroke-width="2"/></g></svg>')})},1e3),$(".experiment:nth-of-type("+currentExperiment+")").hasClass("waiting")&&($(".experiment:nth-of-type("+currentExperiment+")").load("experiments-"+currentExperiment+".php"),$(".experiment:nth-of-type("+currentExperiment+")").removeClass("waiting")),$(".experiment:nth-of-type("+currentExperiment+")").addClass("current"),$(".experiment--index #current").text(pad(currentExperiment,2)),currentExperiment==allExperiments&&$(".experiment--navigation #next").addClass("inactive"),console.log(currentExperiment)}function prevExperiment(){$(".experiment--navigation #next").removeClass("inactive"),currentExperiment-=1,$(".experiment").removeClass("current");for(var e=0;e<players.length;e++)players[e].pause();setTimeout(function(){window.scrollTo(0,0),players=Array.from(document.querySelectorAll(".current .player")),mapPlayers()},1e3),$(".experiment:nth-of-type("+currentExperiment+")").addClass("current"),$(".experiment--index #current").text(pad(currentExperiment,2)),1==currentExperiment&&$(".experiment--navigation #prev").addClass("inactive"),console.log(currentExperiment)}function scrollReveal(){for(var e=document.querySelectorAll("main section"),o=0;o<e.length;o++){var t=window.innerHeight;e[o].getBoundingClientRect().top<t-150?e[o].classList.add("active"):e[o].classList.remove("active")}}$(".experiment--index #total").text(pad(allExperiments,2)),$(document).ready(function(){$(".experiment--navigation #next").on("click",function(){nextExperiment()})}),$(document).ready(function(){$(".experiment--navigation #prev").on("click",function(){prevExperiment()})}),$("body").hasClass("experiments")&&($(document).keyup(function(e){40==e.keyCode&&nextExperiment()}),$(document).keyup(function(e){38==e.keyCode&&prevExperiment()})),$("html, body, *").mousewheel(function(e,o){$("body").hasClass("experiments")&&(this.scrollLeft-=1*o,$(".scroll").length&&o<0&&$(".scroll").removeClass("visible"))}),window.addEventListener("scroll",scrollReveal),scrollReveal(),$("a.cta").each(function(){$(this).append('<svg class="cta-arrow" width="32" height="32" xmlns="http://www.w3.org/2000/svg"><g stroke="#00F" fill="none" fill-rule="evenodd" stroke-linejoin="round"><circle cx="16" cy="16" r="15.12"/><path d="M16.14 9.93L22.21 16l-6.07 6.07M8.23 16h13.98" stroke-width="2"/></g></svg>')}),$("a.cta_left").each(function(){$(this).prepend('<svg class="cta-arrow" width="32" height="32" xmlns="http://www.w3.org/2000/svg"><g stroke="#00F" fill="none" fill-rule="evenodd" stroke-linejoin="round"><circle cx="16" cy="16" r="15.12"/><path d="M16.14 9.93L22.21 16l-6.07 6.07M8.23 16h13.98" stroke-width="2"/></g></svg>')}),$(".col--1").each(function(){$(this).is(":empty")&&$(this).addClass("filler")}),(!$("body").hasClass("experiments")||$("body").hasClass("experiments")&&$(window).width()<1e3)&&$(window).scroll(function(){$(window).scrollTop()>=30?$("header .split").addClass("split--scrolled"):$("header .split").removeClass("split--scrolled")});var menuClosed=!0;function adjustForFooter(){$("main").css("margin-bottom",$("footer").outerHeight()+"px")}$(document).ready(function(){$("#menu").on("click",function(){menuClosed?$("#menu").attr("class","open"):$("#menu").attr("class",""),menuClosed=!menuClosed,$("nav").toggleClass("open"),$("#navbg").toggleClass("open")})}),$(document).keyup(function(e){27==e.keyCode&&$("nav").hasClass("open")&&(menuClosed=!menuClosed,$("nav").removeClass("open"),$("#menu").attr("class",""),$("#navbg").attr("class",""))}),$("#navbg").click(function(){$("nav").hasClass("open")&&$("nav").hasClass("open")&&(menuClosed=!menuClosed,$("nav").removeClass("open"),$("#menu").attr("class",""),$("#navbg").attr("class",""))}),$('a:not([href^="http://"],[href^="https://"],[href^="#"],[href^="mailto:"])').each(function(){$(this).on("click",function(){if(!$(this).hasClass("opposite-underline")){$("#menubackground").addClass("open"),$("#menu").addClass("moveOut");var e=$(this).attr("href");return setTimeout(function(){window.location=e},600),!1}})}),$("nav article div p.p--large").each(function(){$(this).on("click",function(){$(this).addClass("followLink"),$("nav article div p.p--large").not(".followLink").addClass("menuNotFollow"),$(".followLink").addClass("fadeOut"),$("#menubackground").addClass("open"),$("#menu").addClass("moveOut"),$("nav.open article:last-child").addClass("moveOut");var e=$(this).find("a").attr("href");return setTimeout(function(){window.location=e},1200),!1})}),1==$("footer").css("opacity")&&(window.onresize=function(){adjustForFooter()},$(document).ready(function(){adjustForFooter()}));var clientX=-100,clientY=-100,innerCursor=document.querySelector(".circle-cursor--dot"),outerCursor=document.querySelector(".circle-cursor--outer"),eye=document.querySelector(".circle-cursor--outer .eye #inner");function initCursor(){document.addEventListener("mousemove",function(e){clientX=e.clientX,clientY=e.clientY}),requestAnimationFrame(function e(o){innerCursor.style.transform="translate("+clientX+"px, "+clientY+"px)",outerCursor.style.transform="translate("+clientX+"px, "+clientY+"px)",requestAnimationFrame(e)})}initCursor();for(var links=document.getElementsByTagName("a"),i=0;i<links.length;i++){var a=links[i];a.onmouseover=function(){overCursor("hover")},a.onmouseout=function(){outCursor("hover")}}function overCursor(e){innerCursor.classList.add(e),outerCursor.classList.add(e)}function outCursor(e){innerCursor.classList.remove(e),outerCursor.classList.remove(e)}$(document).on("mouseover","a",function(){overCursor("hover")}),$(document).on("mouseout","a",function(){outCursor("hover")}),$("#menu-icon").mouseover(function(){overCursor("hover")}),$("#menu-icon").mouseout(function(){outCursor("hover")}),$(".chapters #sidebar li p").mouseover(function(){overCursor("hover")}),$(".chapters #sidebar li p").mouseout(function(){outCursor("hover")}),$(".experiment--navigation #prev").mouseover(function(){overCursor("hover")}),$(".experiment--navigation #prev").mouseout(function(){outCursor("hover")}),$(".experiment--navigation #next").mouseover(function(){overCursor("hover")}),$(".experiment--navigation #next").mouseout(function(){outCursor("hover")}),$(document).on("mouseover","button",function(){overCursor("hover")}),$(document).on("mouseout","button",function(){outCursor("hover")}),$(document).on("mouseover","img",function(){overCursor("noChange")}),$(document).on("mouseout","img",function(){outCursor("noChange")}),$(document).on("mouseover","video",function(){overCursor("noChange")}),$(document).on("mouseout","video",function(){outCursor("noChange")}),$(document).on("mouseover","a img",function(){overCursor("imageHover")}),$(document).on("mouseout","a img",function(){outCursor("imageHover")}),$(document).on("mouseover",".plyr__video-wrapper",function(){overCursor("imageHover")}),$(document).on("mouseout",".plyr__video-wrapper",function(){outCursor("imageHover")}),window.onresize=function(){document.body.height=window.innerHeight},window.onresize();